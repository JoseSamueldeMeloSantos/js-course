<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Propaga√ß√£o de eventos (Captura e Bolha)</title>
  <style>
    /* Vamos usar 3 caixas para visualizar a propaga√ß√£o */
    .caixa {
      padding: 30px;
      margin: 10px;
      border: 2px solid black;
    }
    .externa { background-color: lightcoral; }
    .media { background-color: lightgreen; }
    .interna { background-color: lightblue; }
  </style>
</head>
<body>

  <!-- Estrutura aninhada (uma dentro da outra) -->
  <div class="caixa externa">
    EXTERNA
    <div class="caixa media">
      M√âDIA
      <div class="caixa interna">INTERNA</div>
    </div>
  </div>

  <script>
    // ============================================================
    // üìò CONCEITO: Propaga√ß√£o de eventos
    // ============================================================
    // Quando voc√™ clica em um elemento dentro de outro,
    // o evento "sobe" ou "desce" pela √°rvore do DOM.
    //
    // Existem 2 fases principais:
    // 1Ô∏è‚É£ CAPTURA (capturing phase) ‚Üí o evento vem de fora pra dentro
    // 2Ô∏è‚É£ BOLHA (bubbling phase) ‚Üí o evento vai de dentro pra fora (padr√£o)

    // Vamos pegar as tr√™s caixas:
    const externa = document.querySelector('.externa');
    const media = document.querySelector('.media');
    const interna = document.querySelector('.interna');

    // ============================================================
    // üü¢ Exemplo 1: Fase de bolha (padr√£o)
    // ============================================================
    // Quando voc√™ clica na DIV interna,
    // o evento "sobe" (bolha) para as DIVs de fora.
    interna.addEventListener('click', function() {
      alert('Clique na DIV INTERNA (fase de bolha)');
    });

    media.addEventListener('click', function() {
      alert('Clique chegou na DIV M√âDIA (fase de bolha)');
    });

    externa.addEventListener('click', function() {
      alert('Clique chegou na DIV EXTERNA (fase de bolha)');
    });

    // ============================================================
    // üü° Exemplo 2: Fase de CAPTURA
    // ============================================================
    // Para ouvir o evento na fase de captura,
    // passamos "true" como terceiro argumento no addEventListener:
    externa.addEventListener('click', function() {
      console.log('Captura EXTERNA');
    }, true);

    media.addEventListener('click', function() {
      console.log('Captura M√âDIA');
    }, true);

    interna.addEventListener('click', function() {
      console.log('Captura INTERNA');
    }, true);

    // Quando clicar na interna:
    // A ordem ser√°:
    // 1Ô∏è‚É£ externa (captura)
    // 2Ô∏è‚É£ media (captura)
    // 3Ô∏è‚É£ interna (captura)
    // 4Ô∏è‚É£ interna (bolha)
    // 5Ô∏è‚É£ media (bolha)
    // 6Ô∏è‚É£ externa (bolha)

    // ============================================================
    // üî¥ Exemplo 3: Parando a propaga√ß√£o
    // ============================================================
    // Podemos impedir que o evento "suba" ou "des√ßa" usando:
    // event.stopPropagation()

    interna.addEventListener('click', function(event) {
      event.stopPropagation(); // impede que o clique continue subindo
      console.log('Propaga√ß√£o parada na DIV INTERNA');
    });
  </script>
</body>
</html>
